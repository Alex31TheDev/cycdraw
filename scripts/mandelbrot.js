let a=evalArgs.split(" "),o="Invalid args. Usage: %t mandelbrot [point_x float] [point_y float] [scale float > 0] {optional color method int} {freq red float} {freq green float} {freq blue float} {freq mult float}";if(a.length<3||a.length>8)return o;let l=parseFloat(a[0]),e=parseFloat(a[1]),r=parseFloat(a[2]),i=parseInt(a[3])||0,s=parseFloat(a[4]),f=parseFloat(a[5]),h=parseFloat(a[6]),n=parseFloat(a[7]);if(s=isNaN(s)?.9:s,f=isNaN(f)?.4:f,h=isNaN(h)?.6:h,n=isNaN(n)?64:n,isNaN(l)||isNaN(e)||!r)return o;let g=1,p=1;function M(t){return(Math.cos(Math.PI*t+Math.PI)+1)/2}const m=Math.log(16),N=img.h-1;let q,u,F,c,w,x,d,I,b,P,_,k,v,y,U,j,z,A,B,C,D,E=Math.pow(1.3,r)+22*r,G=Math.sqrt(g*g+p*p);g/=G,p/=G,s*=n,f*=n,h*=n,r=Math.pow(2,r);for(let t=0;t<img.w;t++)for(let a=0;a<img.h;a++){I=0,b=0,c=0,w=0,q=(t-img.w/2)/r+l,u=(a-img.h/2)/r+e;for(let o=0;o<E;o++)if(1==i&&(P=I,I=2*(c*I-w*b)+1,b=2*(c*b+w*P)),x=c*c,d=w*w,U=x+d,w=2*c*w+u,c=x-d+q,U>16){1==i?(y=I*I+b*b,_=(c*I+w*b)/y,k=(w*I-c*b)/y,v=Math.sqrt(_*_+k*k),_/=v,k/=v,A=(_*g+k*p+G)/(G+1),A=Math.max(A,0)+1,B=C=D=Math.floor(255*A)):0==i&&(j=(o-Math.log(Math.log(Math.sqrt(U))/m)/.6931471805599453)/E,B=Math.floor(255*M(j*s)),C=Math.floor(255*M(j*f)),D=Math.floor(255*M(j*h))),z=3*((N-a)*img.w+t),img.pixels[z]=B,img.pixels[z+1]=C,img.pixels[z+2]=D;break}}